<div
ng-repeat="selectList in $ctrl.selectListCollect"
>
	<tag-recusion
	class="bottom_line"
	style="display:{{$ctrl.mode?'inline-block;':'block'}}"
	ng-if="
	selectList[$ctrl.levelIndex] 
	&&
	selectList.length==$ctrl.levelList.length
	"
	
	edit-mode="$ctrl.editMode"
	count="$ctrl.count"
	relation="$ctrl.relation"
	level-list="$ctrl.levelList"
	tag-name="$ctrl.tagName"
	tag-count="$ctrl.tagCount"
	
	select-list="selectList"
	lock-lv1="$ctrl.lockLv1"
	level-index="$ctrl.levelIndex"
	func="$ctrl.func"
	mode="$ctrl.mode"
	></tag-recusion>
</div>

<div

ng-if="!$ctrl.selectListCollect"
>
	<div 
		style="display:inline-block;" 
		ng-show="$ctrl.lockLv1 && list.length"
	>
		<button
		class="btn btn-sm btn-primary"
		>
		{{$ctrl.tagName[$ctrl.selectList[$ctrl.levelIndex].select]}}
		
		</button>
	</div>
	
	<input 
	ng-show="$ctrl.editMode && !$ctrl.lockLv1"
	type="text" 
	ng-model="search.tagName"
	ng-enter="add(search)"
	/>
	
	<div 
		style="display:inline-block;" 
		ng-show="!$ctrl.lockLv1 && list.length"
	>

		<button
		draggable="true"
		sortable="list"
		index="$index"

		ng-show="
		$ctrl.tagName[item.child_id].indexOf(search.tagName)!=-1 
		&& 
		!$ctrl.mode
		"
		ng-class="
		$ctrl.selectList[$ctrl.levelIndex].select==item.child_id?
		'btn-danger':
		'btn-primary'
		"
		ng-click="
		$ctrl.selectList[$ctrl.levelIndex].select==item.child_id?
		$ctrl.selectList[$ctrl.levelIndex].select=undefined:
		$ctrl.selectList[$ctrl.levelIndex].select=item.child_id
		"
		ng-right-click="del($index)"
		ng-repeat="item in list"
		class="btn btn-sm" 
		>
		{{$ctrl.tagName[item.child_id]}}
		({{$ctrl.tagCount[item.child_id]||0}})
		</button>
		<select 
		ng-show="$ctrl.mode && list.length"
		ng-options="item.child_id as $ctrl.tagName[item.child_id] for item in list"
		ng-model="$ctrl.selectList[$ctrl.levelIndex].select"
		>
		<option value="">ç„¡</option>
		</select>
	</div>
	
	<tag-recusion
	style="display:{{$ctrl.mode?'inline-block;':'block'}}"
	ng-if="
	$ctrl.selectList[$ctrl.levelIndex].select && 
	$ctrl.levelList[$ctrl.levelIndex+1] &&
	list.length
	&&
	$ctrl.selectList.length==$ctrl.levelList.length
	"
	
	
	edit-mode="$ctrl.editMode"
	relation="$ctrl.relation"
	level-list="$ctrl.levelList"
	tag-name="$ctrl.tagName"
	tag-count="$ctrl.tagCount"
	
	select-list="$ctrl.selectList"
	
	select="$ctrl.selectList[$ctrl.levelIndex].select"
	
	level-index="$ctrl.levelIndex+1"
	func="$ctrl.func"
	mode="$ctrl.mode"
	></tag-recusion>
</div>








