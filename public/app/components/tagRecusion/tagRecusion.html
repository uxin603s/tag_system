<div
ng-repeat="selectList in $ctrl.selectListCollect"
>
	<tag-recusion
	class="bottom_line"
	style="display:{{$ctrl.mode?'inline-block;':'block'}}"
	ng-if="
	selectList[$ctrl.levelIndex] 
	&&
	selectList.length==cache.levelList.length
	"
	
	select-list="selectList"
	lock-lv1="$ctrl.lockLv1"
	level-index="$ctrl.levelIndex"
	func="$ctrl.func"
	mode="$ctrl.mode"
	></tag-recusion>
</div>

<div
ng-if="!$ctrl.selectListCollect"
>
	<div 
		style="display:inline-block;" 
		ng-show="$ctrl.lockLv1 && list.length"
	>
		<button
		class="btn btn-sm btn-primary"
		>
		{{cache.tagName[$ctrl.selectList[$ctrl.levelIndex].select]}}
		({{cache.count[level_id][$ctrl.selectList[$ctrl.levelIndex].select].count}})
		</button>
	</div>
	
	<input 
	ng-show="cache.editMode && !$ctrl.lockLv1"
	type="text" 
	ng-model="search.tagName"
	ng-enter="$ctrl.func.add($ctrl.levelIndex,$ctrl.select,search,$ctrl.childIds)"
	/>
	
	<div 
		style="display:inline-block;" 
		ng-show="!$ctrl.lockLv1 && list.length"
	>

		<button
		draggable="true"
		sortable="list"
		index="$index"

		ng-show="
		cache.tagName[item.id].indexOf(search.tagName)!=-1 
		&& 
		!$ctrl.mode
		"
		ng-class="
		$ctrl.selectList[$ctrl.levelIndex].select==item.id?
		'btn-danger':
		'btn-primary'
		"
		ng-click="
		$ctrl.selectList[$ctrl.levelIndex].select==item.id?
		$ctrl.selectList[$ctrl.levelIndex].select=undefined:
		$ctrl.selectList[$ctrl.levelIndex].select=item.id
		"
		ng-right-click="$ctrl.func.del($ctrl.levelIndex,$ctrl.select,item.id)"
		ng-repeat="item in list"
		class="btn btn-sm" 
		>{{cache.tagName[item.id]}}({{item.count}})
		</button>
		<select 
		ng-show="$ctrl.mode && list.length"
		ng-options="item.id as cache.tagName[item.id] for item in list"
		ng-model="$ctrl.selectList[$ctrl.levelIndex].select"
		>
		<option value="">ç„¡</option>
		</select>
	</div>
	<div class="hidden">
	{{list}}
	</div>
	<div class="hidden">
	{{$ctrl.selectList[$ctrl.levelIndex].select}}
	{{$ctrl.selectList[$ctrl.levelIndex].childIds}}
	</div>
	
	<tag-recusion
	style="display:{{$ctrl.mode?'inline-block;':'block'}}"
	ng-if="
	$ctrl.selectList[$ctrl.levelIndex] && 
	cache.levelList[$ctrl.levelIndex+1] &&
	$ctrl.selectList[$ctrl.levelIndex].childIds &&
	list.length
	&&
	$ctrl.selectList.length==cache.levelList.length
	"
	
	select-list="$ctrl.selectList"
	select="$ctrl.selectList[$ctrl.levelIndex].select"
	child-ids="$ctrl.selectList[$ctrl.levelIndex].childIds"
	level-index="$ctrl.levelIndex+1"
	func="$ctrl.func"
	mode="$ctrl.mode"
	></tag-recusion>
</div>








